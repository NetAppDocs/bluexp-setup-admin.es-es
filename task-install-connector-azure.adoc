---
sidebar: sidebar 
permalink: task-install-connector-azure.html 
keywords: install connector, azure connector installation, azure connector, install connector in azure, bluexp, azure marketplace, manual install, create connector 
summary: Cree un conector directamente desde la consola basada en web de BlueXP, desde Azure Marketplace o mediante la instalación del software en su propio host Linux. 
---
= Cree un conector en Azure
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cree un conector directamente desde la consola basada en web de BlueXP, desde Azure Marketplace o mediante la instalación del software en su propio host Linux.

[role="tabbed-block"]
====
.BlueXP
--
.Lo que necesitará
* Una suscripción a Azure.
* Una red virtual y una subred en su región de Azure preferida.
* Detalles sobre un servidor proxy, si su empresa requiere un proxy para todo el tráfico saliente de Internet:
+
** Dirección IP
** Credenciales
** Certificado HTTPS


* Si no quiere que BlueXP cree automáticamente una función de Azure para Connector, tendrá que crear la suya propia link:reference-permissions-azure.html["uso de la política en esta página"].
+
Estos permisos son para la propia instancia de Connector. Se trata de un conjunto de permisos diferente al que se configuró anteriormente para desplegar el conector.



.Pasos
. Si está creando su primer entorno de trabajo, haga clic en *Agregar entorno de trabajo* y siga las indicaciones. De lo contrario, haga clic en el menú desplegable *conector* y seleccione *Agregar conector*.
+
image:screenshot_connector_add.gif["Captura de pantalla que muestra el icono conector en el encabezado y la acción Agregar conector ."]

. Elija *Microsoft Azure* como proveedor de cloud.
. En la página *despliegue de un conector*:
+
.. En *autenticación*, seleccione la opción de autenticación que coincida con la forma en que configuró los permisos de Azure:
+
*** Seleccione *cuenta de usuario de Azure* para iniciar sesión en su cuenta de Microsoft, que debería tener los permisos necesarios.
+
El formulario es propiedad de Microsoft y está alojado en él. Sus credenciales no se proporcionan a NetApp.

+

TIP: Si ya ha iniciado sesión en una cuenta de Azure, BlueXP utilizará esa cuenta automáticamente. Si tiene varias cuentas, es posible que deba cerrar la sesión primero para asegurarse de utilizar la cuenta correcta.

*** Seleccione *Principal del servicio de Active Directory* para introducir información acerca del principal del servicio de Azure Active Directory que otorga los permisos necesarios:
+
**** ID de aplicación (cliente)
**** ID de directorio (inquilino)
**** Secreto de cliente






+
link:task-set-up-permissions-azure.html["Aprenda cómo obtener estos valores para un director de servicio"].

. Siga los pasos del asistente para crear el conector:
+
** *Autenticación de VM*: Elija una suscripción de Azure, una ubicación, un nuevo grupo de recursos o un grupo de recursos existente y, a continuación, elija un método de autenticación.
** *Detalles*: Escriba un nombre para la instancia, especifique etiquetas y elija si desea que BlueXP cree una nueva función que tenga los permisos necesarios o si desea seleccionar una función existente con la que se haya configurado link:reference-permissions-azure.html["los permisos necesarios"].
+
Tenga en cuenta que puede elegir las suscripciones asociadas a esta función. Cada suscripción que elija proporciona al conector permisos para implementar Cloud Volumes ONTAP en esas suscripciones.

** *Red*: Elija un vnet y una subred, si desea activar una dirección IP pública y, opcionalmente, especifique una configuración de proxy.
** *Grupo de seguridad*: Elija si desea crear un nuevo grupo de seguridad o si desea seleccionar un grupo de seguridad existente que permita el acceso entrante HTTP, HTTPS y SSH.
** *Revisión*: Revise sus selecciones para verificar que su configuración es correcta.


. Haga clic en *Agregar*.
+
La máquina virtual debe estar lista en unos 7 minutos. Debe permanecer en la página hasta que el proceso se complete.



.Resultado
Una vez completado el proceso, el conector está disponible para su uso en BlueXP.

--
.Azure Marketplace
--
.Pasos
. Vaya a la página NetApp Connector VM del Azure Marketplace.
+
https://azuremarketplace.microsoft.com/en-us/marketplace/apps/netapp.netapp-oncommand-cloud-manager["Página de Azure Marketplace para regiones comerciales"^]

. Haga clic en *Get Now* y, a continuación, haga clic en *Continue*.
. En el portal de Azure, haga clic en *Crear* y siga los pasos para configurar la máquina virtual.
+
Tenga en cuenta lo siguiente al configurar la máquina virtual:

+
** El conector puede tener un rendimiento óptimo tanto con discos HDD como SSD.
** Elija un tamaño de máquina virtual que cumpla los requisitos de CPU y RAM. Recomendamos DS3 v2.
+
link:reference-host-requirements-azure["Revise los requisitos de las máquinas virtuales"].

** Para el grupo de seguridad de red, el conector requiere conexiones entrantes mediante SSH, HTTP y HTTPS.
+
link:reference-ports-azure.html["Obtenga más información sobre las reglas de grupo de seguridad para el conector"].

** En *Gestión*, active *identidad administrada asignada por el sistema* para el conector VM seleccionando *On*.
+
Esta configuración es importante porque una identidad administrada permite que la máquina virtual Connector se identifique a sí misma en Azure Active Directory sin proporcionar credenciales. Una vez que haya terminado, deberá asignar la función personalizada a la que creó https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview["Obtenga más información sobre las identidades gestionadas para recursos de Azure"^].



. En la página *revisar + crear*, revise las selecciones y haga clic en *Crear* para iniciar la implementación.
+
Azure implementa la máquina virtual con los ajustes especificados. El software de la máquina virtual y el conector debe estar funcionando en aproximadamente cinco minutos.

. Abra un explorador Web desde un host que tenga una conexión con la máquina virtual Connector e introduzca la siguiente URL:
+
https://_ipaddress_[]

. Después de iniciar sesión, configure el conector:
+
.. Especifique la cuenta BlueXP que desea asociar al conector.
.. Escriba un nombre para el sistema.
.. En *¿se está ejecutando en un entorno seguro?* mantener el modo restringido desactivado.
+
Debe mantener desactivado el modo restringido porque estos pasos describen cómo utilizar BlueXP en modo estándar. Sólo debe activar el modo restringido si tiene un entorno seguro y desea desconectar esta cuenta de los servicios de entorno de administración de BlueXP. Si ese es el caso, link:task-quick-start-restricted-mode.html["Siga los pasos para comenzar con BlueXP en modo restringido"].

.. Haga clic en *Vamos a iniciar*.




El conector ya está instalado y está configurado con su cuenta BlueXP.

.El futuro
link:task-provide-permissions-azure.html["Proporcione a BlueXP los permisos que haya configurado anteriormente"].

--
.Instalación manual
--
.Lo que necesitará
* Privilegios de root para instalar el conector.
* Detalles sobre un servidor proxy, si se necesita un proxy para el acceso a Internet desde el conector.
+
Tiene la opción de configurar un servidor proxy después de la instalación, pero para hacerlo es necesario reiniciar el conector.

* Un certificado firmado por CA, si el servidor proxy utiliza HTTPS o si el proxy es un proxy de interceptación.
* Una identidad gestionada habilitada en la máquina virtual de Azure para poder proporcionar los permisos de Azure necesarios a través de un rol personalizado.
+
https://learn.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/qs-configure-portal-windows-vm["Documentación de Microsoft Azure: Configure las identidades gestionadas para los recursos de Azure en una máquina virtual mediante el portal de Azure"^]



.Acerca de esta tarea
* La instalación instala las herramientas de línea de comandos de AWS (awscli) para habilitar los procedimientos de recuperación del soporte de NetApp.
+
Si recibe un mensaje que ha fallado al instalar el awscli, puede ignorar el mensaje de forma segura. El conector puede funcionar correctamente sin las herramientas.

* El instalador disponible en el sitio de soporte de NetApp puede ser una versión anterior. Después de la instalación, el conector se actualiza automáticamente si hay una nueva versión disponible.


.Pasos
. Compruebe que docker está activado y en ejecución.
+
[source, cli]
----
sudo systemctl enable docker && sudo systemctl start docker
----
. Si las variables del sistema _http_proxy_ o _https_proxy_ están establecidas en el host, elimínelas:
+
[source, cli]
----
unset http_proxy
unset https_proxy
----
+
Si no elimina estas variables del sistema, la instalación fallará.

. Descargue el software del conector de https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab["Sitio de soporte de NetApp"^]Y, a continuación, cópielo en el host Linux.
+
Debe descargar el instalador "en línea" del conector que se utiliza en su red o en la nube. Hay disponible un instalador "sin conexión" independiente para el conector, pero sólo es compatible con implementaciones en modo privado.

. Asigne permisos para ejecutar el script.
+
[source, cli]
----
chmod +x OnCommandCloudManager-<version>
----
+
Donde <version> es la versión del conector que ha descargado.

. Ejecute el script de instalación.
+
[source, cli]
----
 ./OnCommandCloudManager-<version> --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
----
+
Los parámetros --proxy y --cacert son opcionales. Si tiene un servidor proxy, deberá introducir los parámetros como se muestra. El instalador no le solicita que proporcione información sobre un proxy.

+
A continuación encontrará un ejemplo del comando utilizando los dos parámetros opcionales:

+
[source, cli]
----
 ./OnCommandCloudManager-V3.9.26 --proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
----
+
--proxy configura el conector para que utilice un servidor proxy HTTP o HTTPS con uno de los siguientes formatos:

+
** \http://address:port
** \http://username:password@address:port
** \https://address:port
** \https://username:password@address:port


+
--cacert especifica un certificado firmado por CA que se utilizará para el acceso HTTPS entre el conector y el servidor proxy. Este parámetro sólo es obligatorio si se especifica un servidor proxy HTTPS o si el proxy es un proxy de interceptación.

. Espere a que finalice la instalación.
+
Al final de la instalación, el servicio Connector (occm) se reinicia dos veces si ha especificado un servidor proxy.

. Abra un explorador Web desde un host que tenga una conexión con la máquina virtual Connector e introduzca la siguiente URL:
+
https://_ipaddress_[]

. Después de iniciar sesión, configure el conector:
+
.. Especifique la cuenta BlueXP que desea asociar al conector.
.. Escriba un nombre para el sistema.
.. En *¿se está ejecutando en un entorno seguro?* mantener el modo restringido desactivado.
+
Debe mantener desactivado el modo restringido porque estos pasos describen cómo utilizar BlueXP en modo estándar. Sólo debe activar el modo restringido si tiene un entorno seguro y desea desconectar esta cuenta de los servicios de entorno de administración de BlueXP. Si ese es el caso, link:task-quick-start-restricted-mode.html["Siga los pasos para comenzar con BlueXP en modo restringido"].

.. Haga clic en *Vamos a iniciar*.




.Resultado
El conector ya está instalado y está configurado con su cuenta BlueXP.

.El futuro
link:task-provide-permissions-azure.html["Proporcione a BlueXP los permisos que haya configurado anteriormente"].

--
====