---
sidebar: sidebar 
permalink: task-install-connector-google.html 
keywords: install connector, google cloud connector installation, google cloud connector, install connector in google cloud, bluexp, gcloud, manual install, create connector, gcp installation, gcp connector 
summary: Cree un conector directamente desde la consola basada en Web BlueXP, utilizando gcloud o instalando el software en su propio host Linux. 
---
= Cree un conector en Google Cloud
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cree un conector directamente desde la consola basada en Web BlueXP, utilizando gcloud o instalando el software en su propio host Linux.

[role="tabbed-block"]
====
.BlueXP
--
.Lo que necesitará
* Los permisos necesarios de Google Cloud para crear el conector y una cuenta de servicio para el conector VM.
+
link:task-set-up-permissions-google.html["Aprenda a configurar los permisos de Google Cloud"]

* Un VPC y una subred que cumplan los requisitos de red.
+
link:task-set-up-networking-google.html["Obtenga información sobre los requisitos de red"]

* Detalles sobre un servidor proxy, si se necesita un proxy para el acceso a Internet desde el conector.


.Pasos
. Haga clic en el menú desplegable *conector* y seleccione *Agregar conector*.
+
image:screenshot_connector_add.gif["Captura de pantalla que muestra el icono conector en el encabezado y la acción Agregar conector ."]

. Elija *Google Cloud Platform* como su proveedor de cloud.
. En la página *despliegue de un conector*, revise los detalles sobre lo que necesitará. Dispone de dos opciones:
+
.. Haga clic en *continuar* para preparar la implementación utilizando la guía del producto. Cada paso de la guía del producto incluye la información que se incluye en esta página de la documentación.
.. Haga clic en *Ir a implementación* si ya ha preparado siguiendo los pasos de esta página.


. Siga los pasos del asistente para crear el conector:
+
** Si se le solicita, inicie sesión en su cuenta de Google, que debería tener los permisos necesarios para crear la instancia de la máquina virtual.
+
El formulario es propiedad de Google y está alojado en él. Sus credenciales no se proporcionan a NetApp.

** *Detalles*: Introduzca un nombre para la instancia de la máquina virtual, especifique etiquetas, seleccione un proyecto y, a continuación, seleccione la cuenta de servicio que tenga los permisos necesarios (consulte la sección anterior para obtener más información).
** *ubicación*: Especifique una región, zona, VPC y subred para la instancia.
** *Red*: Elija si desea activar una dirección IP pública y, opcionalmente, especifique una configuración de proxy.
** *Política de firewall*: Elija si desea crear una nueva política de firewall o si desea seleccionar una política de firewall existente que permita las reglas de entrada y salida requeridas.
+
link:reference-ports-gcp.html["Reglas de firewall en Google Cloud"]

** *Revisión*: Revise sus selecciones para verificar que su configuración es correcta.


. Haga clic en *Agregar*.
+
La instancia debe estar lista en unos 7 minutos. Debe permanecer en la página hasta que el proceso se complete.



.Resultado
Una vez completado el proceso, el conector está disponible para su uso en BlueXP.

--
.gcloud
--
.Lo que necesitará
* Los permisos necesarios de Google Cloud para crear el conector y una cuenta de servicio para el conector VM.
+
link:task-set-up-permissions-google.html["Aprenda a configurar los permisos de Google Cloud"]

* Un VPC y una subred que cumplan los requisitos de red.
+
link:task-set-up-networking-google.html["Obtenga información sobre los requisitos de red"]



.Pasos
. Inicie sesión en el SDK de gcloud con su metodología preferida.
+
En nuestros ejemplos, utilizaremos un shell local con gcloud SDK instalado, pero puede utilizar Google Cloud Shell nativo en la consola de Google Cloud.

+
Para obtener más información acerca de Google Cloud SDK, visite la link:https://cloud.google.com/sdk["Página de documentación de Google Cloud SDK"^].

. Compruebe que ha iniciado sesión como usuario que tiene los permisos necesarios definidos en la sección anterior:
+
[source, bash]
----
gcloud auth list
----
+
El resultado debe mostrar lo siguiente en el que la cuenta de usuario * es la cuenta de usuario que desea iniciar sesión como:

+
[listing]
----
Credentialed Accounts
ACTIVE  ACCOUNT
     some_user_account@domain.com
*    desired_user_account@domain.com
To set the active account, run:
 $ gcloud config set account `ACCOUNT`
Updates are available for some Cloud SDK components. To install them,
please run:
$ gcloud components update
----
. Ejecute el `gcloud compute instances create` comando:
+
[source, bash]
----
gcloud compute instances create <instance-name>
  --machine-type=n2-standard-4
  --image-project=netapp-cloudmanager
  --image-family=cloudmanager
  --scopes=cloud-platform
  --project=<project>
  --service-account=<service-account>
  --zone=<zone>
  --no-address
  --tags <network-tag>
  --network <network-path>
  --subnet <subnet-path>
  --boot-disk-kms-key <kms-key-path>
----
+
nombre-instancia:: El nombre de la instancia de máquina virtual que desee para la instancia de.
proyecto:: (Opcional) el proyecto en el que desea poner en marcha la máquina virtual.
cuenta de servicio:: La cuenta de servicio especificada en la salida del paso 2.
zona:: La zona en la que desea implementar la máquina virtual
sin dirección:: (Opcional) no se utiliza ninguna dirección IP externa (se necesita un NAT o un proxy en la nube para enrutar el tráfico a Internet pública)
etiqueta de red:: (Opcional) Agregar etiquetado de red para vincular una regla de firewall mediante etiquetas a la instancia de conector
ruta de la red:: (Opcional) Añada el nombre de la red a la cual implementar el conector en (para un VPC compartido, se necesita la ruta completa)
ruta de subred:: (Opcional) Añada el nombre de la subred en la que se va a implementar el conector (para un VPC compartido, se necesita la ruta completa)
km-clave-ruta:: (Opcional) Agregar una clave KMS para cifrar los discos del conector (también es necesario aplicar permisos IAM)
+
--
Para obtener más información acerca de estas marcas, visite link:https://cloud.google.com/sdk/gcloud/reference/compute/instances/create["Documentación sobre Google Cloud Computing SDK"^].

--


+
Al ejecutar el comando se pone en marcha el conector con la imagen maestra de NetApp. La instancia y el software del conector deben estar funcionando en aproximadamente cinco minutos.

. Abra un explorador Web desde un host que tenga una conexión con la instancia de Connector e introduzca la siguiente URL:
+
https://_ipaddress_[]

. Después de iniciar sesión, configure el conector:
+
.. Especifique la cuenta BlueXP que desea asociar al conector.
+
link:concept-netapp-accounts.html["Obtenga más información sobre las cuentas de BlueXP"].

.. Escriba un nombre para el sistema.




.Resultado
El conector ya está instalado y configurado con su cuenta BlueXP.

Abra un explorador web y vaya al https://console.bluexp.netapp.com["Consola BlueXP"^] Para empezar a utilizar el conector con BlueXP.

--
.Instalación manual
--
.Lo que necesitará
* Privilegios de root para instalar el conector.
* Detalles sobre un servidor proxy, si se necesita un proxy para el acceso a Internet desde el conector.
+
Tiene la opción de configurar un servidor proxy después de la instalación, pero para hacerlo es necesario reiniciar el conector.

* Un certificado firmado por CA, si el servidor proxy utiliza HTTPS o si el proxy es un proxy de interceptación.


.Acerca de esta tarea
* La instalación instala las herramientas de línea de comandos de AWS (awscli) para habilitar los procedimientos de recuperación del soporte de NetApp.
+
Si recibe un mensaje que ha fallado al instalar el awscli, puede ignorar el mensaje de forma segura. El conector puede funcionar correctamente sin las herramientas.

* El instalador disponible en el sitio de soporte de NetApp puede ser una versión anterior. Después de la instalación, el conector se actualiza automáticamente si hay una nueva versión disponible.


.Pasos
. Compruebe que docker está activado y en ejecución.
+
[source, cli]
----
sudo systemctl enable docker && sudo systemctl start docker
----
. Si las variables del sistema _http_proxy_ o _https_proxy_ están establecidas en el host, elimínelas:
+
[source, cli]
----
unset http_proxy
unset https_proxy
----
+
Si no elimina estas variables del sistema, la instalación fallará.

. Descargue el software del conector de https://mysupport.netapp.com/site/products/all/details/cloud-manager/downloads-tab["Sitio de soporte de NetApp"^]Y, a continuación, cópielo en el host Linux.
+
Debe descargar el instalador "en línea" del conector que se utiliza en su red o en la nube. Hay disponible un instalador "sin conexión" independiente para el conector, pero sólo es compatible con implementaciones en modo privado.

. Asigne permisos para ejecutar el script.
+
[source, cli]
----
chmod +x OnCommandCloudManager-<version>
----
+
Donde <version> es la versión del conector que ha descargado.

. Ejecute el script de instalación.
+
[source, cli]
----
 ./OnCommandCloudManager-<version> --proxy <HTTP or HTTPS proxy server> --cacert <path and file name of a CA-signed certificate>
----
+
Los parámetros --proxy y --cacert son opcionales. Si tiene un servidor proxy, deberá introducir los parámetros como se muestra. El instalador no le solicita que proporcione información sobre un proxy.

+
A continuación encontrará un ejemplo del comando utilizando los dos parámetros opcionales:

+
[source, cli]
----
 ./OnCommandCloudManager-V3.9.26 --proxy https://user:password@10.0.0.30:8080/ --cacert /tmp/cacert/certificate.cer
----
+
--proxy configura el conector para que utilice un servidor proxy HTTP o HTTPS con uno de los siguientes formatos:

+
** \http://address:port
** \http://username:password@address:port
** \https://address:port
** \https://username:password@address:port


+
--cacert especifica un certificado firmado por CA que se utilizará para el acceso HTTPS entre el conector y el servidor proxy. Este parámetro sólo es obligatorio si se especifica un servidor proxy HTTPS o si el proxy es un proxy de interceptación.

. Espere a que finalice la instalación.
+
Al final de la instalación, el servicio Connector (occm) se reinicia dos veces si ha especificado un servidor proxy.

. Abra un explorador Web desde un host que tenga una conexión con la máquina virtual Connector e introduzca la siguiente URL:
+
https://_ipaddress_[]

. Después de iniciar sesión, configure el conector:
+
.. Especifique la cuenta BlueXP que desea asociar al conector.
.. Escriba un nombre para el sistema.
.. En *¿se está ejecutando en un entorno seguro?* mantener el modo restringido desactivado.
+
Debe mantener desactivado el modo restringido porque estos pasos describen cómo utilizar BlueXP en modo estándar. Sólo debe activar el modo restringido si tiene un entorno seguro y desea desconectar esta cuenta de los servicios de entorno de administración de BlueXP. Si ese es el caso, link:task-quick-start-restricted-mode.html["Siga los pasos para comenzar con BlueXP en modo restringido"].

.. Haga clic en *Vamos a iniciar*.




.Resultado
El conector ya está instalado y está configurado con su cuenta BlueXP.

.El futuro
link:task-provide-permissions-google.html["Proporcione a BlueXP los permisos que haya configurado anteriormente"].

--
====